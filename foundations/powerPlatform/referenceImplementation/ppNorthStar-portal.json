{
    "$schema": "<relative path to createFormUI.schema.json>",
    "view": {
        "kind": "Form",
        "properties": {
            "title": "North Star Architecture for Power Platform",
            "steps": [
                {
                    "name": "powerp",
                    "label": "Deployment Setup",
                    "subLabel": {},
                    "bladeTitle": "powerp",
                    "elements": [
                        {
                            "name": "infoBox1",
                            "type": "Microsoft.Common.InfoBox",
                            "visible": true,
                            "options": {
                                "icon": "Info",
                                "text": "North Star Architecture for Power Platform will deploy and configure the foundation for your Power Platform tenant including all best practices and recommendations from Microsoft, and create the initial landing zones for citizen- and professional developers. The deployment requires that the user is a Global Admin or Power Platform Admin in the Azure Active Directory.",
                                "uri": "https://www.microsoft.com"
                            }
                        },
                        {
                            "name": "spn",
                            "type": "Microsoft.Common.Section",
                            "label": "Existing User Managed Identity Configuration",
                            "elements": [],
                            "visible": true
                        },
                        {
                            "name": "SpnBox",
                            "type": "Microsoft.Common.TextBlock",
                            "visible": true,
                            "options": {
                                "text": "The setup requires an existing User Assigned Identity that has been granted RBAC to the Power Platform to complete the deployment.",
                                "link": {
                                    "label": "Learn more",
                                    "uri": "https://docs.microsoft.com/power-platform/admin/powerplatform-api-create-service-principal"
                                }
                            }
                        },
                        {
                            "name": "ppIdentity",
                            "type": "Microsoft.Solutions.ResourceSelector",
                            "label": "Select an existing User Assigned Identity with permissions to the Power Platform APIs",
                            "resourceType": "Microsoft.ManagedIdentity/userAssignedIdentities",
                            "options": {
                                "filter": {
                                    "subscription": "all",
                                    "location": "all"
                                }
                            }
                        },
                        {
                            "name": "sub",
                            "type": "Microsoft.Common.Section",
                            "label": "Azure subscription",
                            "elements": [],
                            "visible": true
                        },
                        {
                            "name": "azureBox",
                            "type": "Microsoft.Common.TextBlock",
                            "visible": true,
                            "options": {
                                "text": "The setup requires an existing Azure subscription to provision the required infrastructure and components, both in Azure and in Power Platform. Select a subscription and a region where the deployment should be placed, and also specify if you want to use this subscription for all Azure services and required configuration.",
                                "link": {
                                    "label": "Learn more",
                                    "uri": "https://docs.microsoft.com/azure/azure-resource-manager/templates/deploy-to-subscription?tabs=azure-cli"
                                }
                            }
                        },
                        {
                            "name": "subscriptionApi",
                            "type": "Microsoft.Solutions.ArmApiControl",
                            "request": {
                                "method": "GET",
                                "path": "subscriptions?api-version=2020-01-01"
                            }
                        },
                        {
                            "name": "subscriptionId",
                            "label": "Subscription",
                            "type": "Microsoft.Common.DropDown",
                            "visible": true,
                            "defaultValue": "",
                            "toolTip": "Select the Subscription for your North Star deployment.",
                            "multiselect": false,
                            "selectAll": false,
                            "filter": true,
                            "filterPlaceholder": "Filter items ...",
                            "multiLine": true,
                            "constraints": {
                                "allowedValues": "[map(steps('powerp').subscriptionApi.value, (item) => parse(concat('{\"label\":\"', item.displayName, '\",\"value\":\"', item.id, '\",\"description\":\"', 'ID: ', item.subscriptionId, '\"}')))]",
                                "required": true
                            }
                        },
                        {
                            "name": "locationsApi",
                            "type": "Microsoft.Solutions.ArmApiControl",
                            "request": {
                                "method": "GET",
                                "path": "locations?api-version=2019-11-01"
                            }
                        },
                        {
                            "name": "locationName",
                            "label": "Location",
                            "type": "Microsoft.Common.DropDown",
                            "visible": true,
                            "defaultValue": "",
                            "toolTip": "Select the Location for your North Star deployment.",
                            "multiselect": false,
                            "selectAll": false,
                            "filter": true,
                            "filterPlaceholder": "Filter items ...",
                            "multiLine": true,
                            "constraints": {
                                "allowedValues": "[map(steps('powerp').locationsApi.value,(item) => parse(concat('{\"label\":\"',item.displayName,'\",\"value\":\"',item.name,'\"}')))]",
                                "required": true
                            }
                        },
                        {
                            "name": "subOption",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Use this subscription for all Azure services and configuration",
                            "defaultValue": "Yes",
                            "multiSelect": true,
                            "toolTip": "If 'Yes' is selected, the setup will configure this setting.",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Yes",
                                        "value": "yes"
                                    },
                                    {
                                        "label": "No",
                                        "value": "no"
                                    }
                                ]
                            },
                            "visible": true
                        }
                    ]
                },
                {
                    "name": "gov",
                    "label": "Security, Governance, and Compliance",
                    "elements": [
                        {
                            "name": "infoBox1",
                            "type": "Microsoft.Common.InfoBox",
                            "visible": true,
                            "options": {
                                "icon": "Info",
                                "text": "Configure tenant security settings and Data-loss prevention policies for Power Platform to meet your overall security requirements. These settings will apply to all existing and new environments in your tenant, and additional restrictions can be configured later in the deployment experience.",
                                "uri": "https://www.microsoft.com"
                            }
                        },
                        {
                            "name": "dlpTenant",
                            "type": "Microsoft.Common.Section",
                            "label": "Tenant Data-loss prevention policy",
                            "elements": [],
                            "visible": true
                        },
                        {
                            "name": "dlpTenantText",
                            "type": "Microsoft.Common.TextBlock",
                            "visible": true,
                            "options": {
                                "text": "Configure overall Data-loss prevention policy for the tenant. This policy will by default apply to all existing and new environments. Additional policies can be configured in the 'Landing Zones' tab.",
                                "link": {
                                    "label": "Learn more",
                                    "uri": "https://docs.microsoft.com/power-platform/admin/wp-data-loss-prevention"
                                }
                            }
                        },
                        {
                            "name": "ppTenantDlp",
                            "type": "Microsoft.Common.DropDown",
                            "multiSelect": false,
                            "multiLine": true,
                            "label": "Assign recommended Data-loss prevention policies to the tenant by selecting the preferred starting baseline.",
                            "defaultValue": "None",
                            "toolTip": "By select a tenant DLP policy, all existing and new Environments will be governed regarding what connectors can be used, and used together.",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "High",
                                        "description": "A highly restrictive tenant DLP policy that only allows certain Microsoft connectors in the business group. All other connectors are categorized as non-business.",
                                        "value": "high"
                                    },
                                    {
                                        "label": "Medium",
                                        "description": "A medium restrictive tenant DLP policy that allows common Microsoft connectors in the business group. All other connectors are categorized as non-business.",
                                        "value": "medium"
                                    },
                                    {
                                        "label": "Low",
                                        "description": "A low restrictive tenant DLP policy that allows most Microsoft connectors in the business group. All other connectors are categorized as non-business.",
                                        "value": "low"
                                    },
                                    {
                                        "label": "None",
                                        "description": "Do not assign tenant DLP policy.",
                                        "value": "none"
                                    }
                                ],
                                "required": true
                            },
                            "visible": true
                        },
                        {
                            "name": "tenantIsolationSetting",
                            "type": "Microsoft.Common.Section",
                            "label": "Tenant isolation (preview)",
                            "elements": [],
                            "visible": true
                        },
                        {
                            "name": "tenantIsolationText",
                            "type": "Microsoft.Common.TextBlock",
                            "visible": true,
                            "options": {
                                "text": "Configure tenant isolation to block external tenants from establishing connections into your tenant (inbound isolation) as well as block your tenant from establishing connections to external tenants (outbound isolation).",
                                "link": {
                                    "label": "Learn more",
                                    "uri": "https://docs.microsoft.com/power-platform/admin/cross-tenant-restrictions"
                                }
                            }
                        },
                        {
                            "name": "ppTenantIsolationSetting",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Enable tenant isolation",
                            "defaultValue": "Do not enable tenant isolation",
                            "toolTip": "Select the preferred tenant isolation method by selecting either inbound, outbound, or both.",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Block inbound",
                                        "value": "inbound"
                                    },
                                    {
                                        "label": "Block outbound",
                                        "value": "outbound"
                                    },
                                    {
                                        "label": "Block both indbound and outbound",
                                        "value": "both"
                                    },
                                    {
                                        "label": "Do not enable tenant isolation",
                                        "value": "none"
                                    }
                                ],
                                "required": true
                            },
                            "visible": true
                        },
                        {
                            "name": "ppTenantIsolationDomains",
                            "type": "Microsoft.Common.TextBox",
                            "label": "Explicit allow list (enter Tenant Domain, ID, or * for all tenants)",
                            "placeholder": "",
                            "defaultValue": "",
                            "toolTip": "Use only allowed characters",
                            "constraints": {
                                "required": false
                            },
                            "visible": "[not(equals(steps('gov').ppTenantIsolationSetting, 'none'))]"
                        },
                        {
                            "name": "tenantGuestsAndSharing",
                            "type": "Microsoft.Common.Section",
                            "label": "Tenant Guest user and sharing settings",
                            "elements": [],
                            "visible": true
                        },
                        {
                            "name": "tenantText",
                            "type": "Microsoft.Common.TextBlock",
                            "visible": true,
                            "options": {
                                "text": "Configure tenant guest and sharing options.",
                                "link": {
                                    "label": "Learn more",
                                    "uri": "https://docs.microsoft.com/powerapps/maker/model-driven-apps/share-model-driven-app#app-sharing-privilege-and-licensing-requirements"
                                }
                            }
                        },
                        {
                            "name": "ppGuestMakerSetting",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Prevent Azure AD guests accounts to make Power Apps",
                            "defaultValue": "Yes",
                            "multiSelect": true,
                            "toolTip": "If 'Yes' is selected, the setup will configure this setting.",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Yes",
                                        "value": "yes"
                                    },
                                    {
                                        "label": "No",
                                        "value": "no"
                                    }
                                ]
                            },
                            "visible": true
                        },
                        {
                            "name": "ppAppSharingSetting",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Restrict sharing of PowerApps with the entire organization",
                            "defaultValue": "Yes",
                            "multiSelect": true,
                            "toolTip": "If 'Yes' is selected, the setup will configure this setting.",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Yes",
                                        "value": "yes"
                                    },
                                    {
                                        "label": "No",
                                        "value": "no"
                                    }
                                ]
                            },
                            "visible": true
                        }
                    ]
                },
                {
                    "name": "environments",
                    "label": "Admin Environment and Settings",
                    "elements": [
                        {
                            "name": "EnvBox",
                            "type": "Microsoft.Common.InfoBox",
                            "visible": true,
                            "options": {
                                "text": "It is highly recommended to have dedicated Admin Environments in Power Platform to manage and administer the platform as you scale. When creating dedicated Admin Environments, you can optionally deploy the 'Center of Excellence Starter-Kit' which provides additional capabilities to scale, manage, and operate your Power Platform tenant. The setup creates dedicated Admin Environments for Development, Test, and Production in order to support maintenance, testing, development, and validation before deploying to production.",
                                "link": {
                                    "label": "Learn more about Center of Excellence Starter-kit",
                                    "uri": "https://docs.microsoft.com/power-platform/guidance/coe/starter-kit"
                                }
                            }
                        },
                        {
                            "name": "tenantEnv",
                            "type": "Microsoft.Common.Section",
                            "label": "Tenant Environment settings",
                            "elements": [],
                            "visible": true
                        },
                        {
                            "name": "tenantEnvText",
                            "type": "Microsoft.Common.TextBlock",
                            "visible": true,
                            "options": {
                                "text": "Configure the overall Environment settings for the tenant. These settings will allow you to control Environment creation process, and capacity management.",
                                "link": {
                                    "label": "Learn more",
                                    "uri": "https://docs.microsoft.com/power-platform/admin/environments-overview"
                                }
                            }
                        },
                        {
                            "name": "ppEnvCreationSetting",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Restrict production and sandbox Environment creation to specific Admins",
                            "defaultValue": "Yes (recommended)",
                            "multiSelect": true,
                            "toolTip": "If 'Yes' is selected, the setup will configure this setting.",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Yes (recommended)",
                                        "value": "yes"
                                    },
                                    {
                                        "label": "No",
                                        "value": "no"
                                    }
                                ]
                            },
                            "visible": true
                        },
                        {
                            "name": "ppTrialEnvCreationSetting",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Restrict trial Environment creation to specific Admins",
                            "defaultValue": "Yes (recommended)",
                            "multiSelect": true,
                            "toolTip": "If 'Yes' is selected, the setup will configure this setting",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Yes (recommended)",
                                        "value": "yes"
                                    },
                                    {
                                        "label": "No",
                                        "value": "no"
                                    }
                                ]
                            },
                            "visible": true
                        },
                        {
                            "name": "ppEnvCapacitySetting",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Restrict capacity allocation to specific Admins",
                            "defaultValue": "Yes (recommended)",
                            "multiSelect": true,
                            "toolTip": "If 'Yes' is selected, the setup will create or use existing Power Platform environment for Healthcare solutions",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Yes (recommended)",
                                        "value": "yes"
                                    },
                                    {
                                        "label": "No",
                                        "value": "no"
                                    }
                                ]
                            },
                            "visible": true
                        },
                        {
                            "name": "adminEnv",
                            "type": "Microsoft.Common.Section",
                            "label": "Admin Environment configuration",
                            "elements": [],
                            "visible": true
                        },
                        {
                            "name": "adminEnvText",
                            "type": "Microsoft.Common.TextBlock",
                            "visible": true,
                            "options": {
                                "text": "Create new dedicated Admin Environments that should be used to operate and manage the overall Power Platform tenant, such as Environment creation, DLP management, Identity and Access, and analytics.",
                                "link": {
                                    "label": "Learn more",
                                    "uri": "https://www.microsoft.com"
                                }
                            }
                        },
                        {
                            "name": "ppAdminEnvNaming",
                            "type": "Microsoft.Common.TextBox",
                            "label": "Provide naming convention for the Admin environments",
                            "placeholder": "",
                            "defaultValue": "",
                            "toolTip": "Use only allowed characters",
                            "constraints": {
                                "required": true,
                                "regex": "^[a-z0-9A-Z]{1,30}$",
                                "validationMessage": "Only alphanumeric characters are allowed, and the value must be 1-30 characters long."
                            },
                            "visible": true
                        },
                        {
                            "name": "ppAdminRegion",
                            "type": "Microsoft.Common.DropDown",
                            "label": "Select region for the new Admin Environments",
                            "placeholder": "",
                            "defaultValue": "",
                            "toolTip": "",
                            "visible": true,
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Europe",
                                        "value": "europe"
                                    },
                                    {
                                        "label": "United States",
                                        "value": "unitedstates"
                                    },
                                    {
                                        "label": "United Arab Emirates",
                                        "value": "unitedarabemirates"
                                    },
                                    {
                                        "label": "Asia",
                                        "value": "asia"
                                    },
                                    {
                                        "label": "India",
                                        "value": "india"
                                    },
                                    {
                                        "label": "Japan",
                                        "value": "japan"
                                    },
                                    {
                                        "label": "France",
                                        "value": "france"
                                    },
                                    {
                                        "label": "Germany",
                                        "value": "germany"
                                    },
                                    {
                                        "label": "Australia",
                                        "value": "australia"
                                    },
                                    {
                                        "label": "Canada",
                                        "value": "canada"
                                    },
                                    {
                                        "label": "South America",
                                        "value": "southamerica"
                                    }
                                ],
                                "required": true
                            }
                        },
                        {
                            "name": "ppAdminCoeSetting",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Boostrap the Admin Environments with 'Center of Excellence Starter-kit'",
                            "defaultValue": "No",
                            "toolTip": "",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Yes",
                                        "value": "yes"
                                    },
                                    {
                                        "label": "No",
                                        "value": "no"
                                    }
                                ],
                                "required": true
                            },
                            "visible": true
                        },
                        {
                            "name": "ppAdminBilling",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Create Billing Policy and Use Azure Subscription for pay-as-you-go for the environments",
                            "defaultValue": "Yes (recommended)",
                            "toolTip": "If 'Yes' is selected, the setup will create or use existing Power Platform environment for Healthcare solutions",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Yes (recommended)",
                                        "value": "yes"
                                    },
                                    {
                                        "label": "No",
                                        "value": "no"
                                    }
                                ]
                            },
                            "visible": true
                        }
                    ]
                },
                {
                    "name": "mgmt",
                    "label": "Management and Monitoring",
                    "elements": [
                        {
                            "name": "infoBox1",
                            "type": "Microsoft.Common.InfoBox",
                            "visible": true,
                            "options": {
                                "icon": "Info",
                                "text": "North Star Architecture for Power Platform will deploy and configure the foundation for your Power Platform tenant including all best practices and recommendations from Microsoft. The deployment requires that the user is a Global Admin or Power Platform Admin in the Azure Active Directory.",
                                "uri": "https://aka.ms/NorthStarPowerPlatform"
                            }
                        },
                        {
                            "name": "logging",
                            "type": "Microsoft.Common.Section",
                            "label": "Tenant observability, security, and logging",
                            "elements": [],
                            "visible": true
                        },
                        {
                            "name": "tenantMonitoringText",
                            "type": "Microsoft.Common.TextBlock",
                            "visible": true,
                            "options": {
                                "text": "Configure critical security and observability options for the Power Platform tenant. These options requires an Azure subscription and Azure services.",
                                "link": {
                                    "label": "Learn more",
                                    "uri": "https://www.microsoft.com"
                                }
                            }
                        },
                        {
                            "name": "ppEnableAzureMonitor",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Enable recommended observability and security integration using Azure services",
                            "defaultValue": "Yes (recommended)",
                            "toolTip": "",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Yes (recommended)",
                                        "value": "yes"
                                    },
                                    {
                                        "label": "No",
                                        "value": "no"
                                    }
                                ]
                            },
                            "visible": true
                        },
                        {
                            "name": "ppRetentionInDays",
                            "type": "Microsoft.Common.Slider",
                            "min": 30,
                            "max": 730,
                            "label": "Log Analytics Data Retention (days)",
                            "subLabel": "Days",
                            "defaultValue": 30,
                            "showStepMarkers": false,
                            "toolTip": "Select retention days for Azure logs. Default is 30 days.",
                            "constraints": {
                                "required": false
                            },
                            "visible": "[equals(steps('mgmt').ppEnableAzureMonitor, 'yes')]"
                        },
                        {
                            "name": "azMonSection",
                            "type": "Microsoft.Common.Section",
                            "label": "Azure Monitor setup",
                            "elements": [],
                            "visible": "[equals(steps('mgmt').ppEnableAzureMonitor, 'yes')]"
                        },
                        {
                            "name": "azMonitoringText",
                            "type": "Microsoft.Common.TextBlock",
                            "visible": "[equals(steps('mgmt').ppEnableAzureMonitor, 'yes')]",
                            "options": {
                                "text": "Configure Azure Monitor solutions that will be integrated to enhance the security posture of your Power Platform tenant.",
                                "link": {
                                    "label": "Learn more",
                                    "uri": "https://www.microsoft.com"
                                }
                            }
                        },
                        {
                            "name": "ppEnable365Compliance",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Enable auditing and integration with M365 Security & Compliance Center",
                            "defaultValue": "Yes (recommended)",
                            "visible": "[equals(steps('mgmt').ppEnableAzureMonitor, 'yes')]",
                            "toolTip": "If 'Yes' is selected, the setup will create or use existing Power Platform environment for Healthcare solutions",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Yes (recommended)",
                                        "value": "yes"
                                    },
                                    {
                                        "label": "No",
                                        "value": "no"
                                    }
                                ]
                            }
                        },
                        {
                            "name": "ppEnableAadLogs",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Enable Monitoring of Azure AD logs",
                            "defaultValue": "Yes (recommended)",
                            "toolTip": "",
                            "constraints": {
                                "required": false,
                                "allowedValues": [
                                    {
                                        "label": "Yes (recommended)",
                                        "value": "yes"
                                    },
                                    {
                                        "label": "No",
                                        "value": "no"
                                    }
                                ]
                            },
                            "visible": "[equals(steps('mgmt').ppEnableAzureMonitor, 'yes')]"
                        },
                        {
                            "name": "ppEnableAzureSecurity",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Enable integration with Microsoft Sentinel",
                            "defaultValue": "Yes (recommended)",
                            "visible": "[equals(steps('mgmt').ppEnableAzureMonitor, 'yes')]",
                            "toolTip": "",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Yes (recommended)",
                                        "value": "yes"
                                    },
                                    {
                                        "label": "No",
                                        "value": "no"
                                    }
                                ]
                            }
                        },
                        {
                            "name": "ppEnableD365Connector",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Enable Sentinel Data Connector for Dynamics 365",
                            "defaultValue": "Yes (recommended)",
                            "visible": "[and(equals(steps('mgmt').ppEnableAzureMonitor, 'yes'), equals(steps('mgmt').ppEnableAzureSecurity, 'yes'))]",
                            "toolTip": "",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Yes (recommended)",
                                        "value": "yes"
                                    },
                                    {
                                        "label": "No",
                                        "value": "no"
                                    }
                                ]
                            }
                        },
                        {
                            "name": "ppEnableAppInsights",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Enable integration with Azure Application Insights",
                            "defaultValue": "Yes (recommended)",
                            "visible": "[equals(steps('mgmt').ppEnableAzureMonitor, 'yes')]",
                            "toolTip": "",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Yes (recommended)",
                                        "value": "yes"
                                    },
                                    {
                                        "label": "No",
                                        "value": "no"
                                    }
                                ]
                            }
                        },
                        {
                            "name": "analytics",
                            "type": "Microsoft.Common.Section",
                            "label": "Tenant analytics and usage",
                            "elements": [],
                            "visible": true
                        },
                        {
                            "name": "tenantAnalyticsText",
                            "type": "Microsoft.Common.TextBlock",
                            "visible": true,
                            "options": {
                                "text": "Configure tenant level analytics to track all-up usage and adoption within the organization across all Environments for Power Apps and Power Automate. For long-term retention, extensibility and richer analysis, you can create a Data Lake Sorage V2 into an Azure subscription and configure Data Export post deployment.",
                                "link": {
                                    "label": "Learn more",
                                    "uri": "https://www.microsoft.com"
                                }
                            }
                        },
                        {
                            "name": "ppEnableTenantAnalytics",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Enable Tenant level analytics for Power Platform",
                            "defaultValue": "Yes (recommended)",
                            "toolTip": "",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Yes (recommended)",
                                        "value": "yes"
                                    },
                                    {
                                        "label": "No",
                                        "value": "no"
                                    }
                                ]
                            },
                            "visible": true
                        },
                        {
                            "name": "ppEnableDataLake",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Enable Data Lake Storage V2 to store captured data for operational and exploratory analytics",
                            "defaultValue": "Yes (recommended)",
                            "toolTip": "",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Yes (recommended)",
                                        "value": "yes"
                                    },
                                    {
                                        "label": "No",
                                        "value": "no"
                                    }
                                ]
                            },
                            "visible": "[equals(steps('mgmt').ppEnableTenantAnalytics, 'yes')]"
                        }
                    ]
                },
                {
                    "name": "landingZones",
                    "label": "Landing Zones",
                    "elements": [
                        {
                            "name": "EnvBox",
                            "type": "Microsoft.Common.InfoBox",
                            "visible": true,
                            "options": {
                                "text": "Prepare and create Landing Zones (Environments for business apps, industry solutions, and professional apps) in Power Platform optimized for citizen developers, professional developers, and industry solutions. When creating these environments, the setup will instantiate dedicated Environments for Development, Test, and Production in order to support maintenance, testing, development, and validation before deploying to production. Lastly, recommended Data-loss prevention policies are provided to further govern the various scenarios.",
                                "link": {
                                    "label": "Learn more",
                                    "uri": "https://www.microsoft.com"
                                }
                            }
                        },
                        {
                            "name": "default",
                            "type": "Microsoft.Common.Section",
                            "label": "Default environment",
                            "elements": [],
                            "visible": true
                        },
                        {
                            "name": "defaultText",
                            "type": "Microsoft.Common.TextBlock",
                            "visible": true,
                            "options": {
                                "text": "The Default Environment is available for all users with a license. It is recommended to rename this Environment to clarify the intent of it, such as 'Personal Productivity', and add further restrictions using Data-lose prevention policies scoped to the Default Environment",
                                "link": {
                                    "label": "Learn more",
                                    "uri": "https://www.microsoft.com"
                                }
                            }
                        },
                        {
                            "name": "ppDefaultRename",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Rename the default environment",
                            "defaultValue": "Yes (recommended)",
                            "multiSelect": true,
                            "toolTip": "If 'Yes' is selected, the setup will rename the environment",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Yes (recommended)",
                                        "value": "yes"
                                    },
                                    {
                                        "label": "No",
                                        "value": "no"
                                    }
                                ]
                            },
                            "visible": true
                        },
                        {
                            "name": "ppDefaultRenameText",
                            "type": "Microsoft.Common.TextBox",
                            "label": "Provide a new name for the default environment",
                            "placeholder": "Personal",
                            "defaultValue": "Personal",
                            "toolTip": "Use only allowed characters",
                            "constraints": {
                                "required": true,
                                "regex": "^[a-z0-9A-Z]{1,30}$",
                                "validationMessage": "Only alphanumeric characters are allowed, and the value must be 1-30 characters long."
                            },
                            "visible": "[equals(steps('landingZones').ppDefaultRename, 'yes')]"
                        },
                        {
                            "name": "ppDefaultDlp",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Assign recommended Data-loss prevention policies to the Default Environment",
                            "defaultValue": "Yes (recommended)",
                            "multiSelect": true,
                            "toolTip": "If 'Yes' is selected, the setup will enable this",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Yes (recommended)",
                                        "value": "yes"
                                    },
                                    {
                                        "label": "No",
                                        "value": "no"
                                    }
                                ]
                            },
                            "visible": "[equals(steps('landingZones').ppDefaultRename, 'yes')]"
                        },
                        {
                            "name": "citizenSection",
                            "type": "Microsoft.Common.Section",
                            "label": "Landing Zones for citizen developers",
                            "elements": [],
                            "visible": true
                        },
                        {
                            "name": "citizenText",
                            "type": "Microsoft.Common.TextBlock",
                            "visible": true,
                            "options": {
                                "text": "The Landing Zones for citizen developrs will be optimized for no code/low code scenarios, and provide them with the required agility and simplicity to rapidly build modern business applications. You can grant business units or indivuduals access to the Environments post creation.",
                                "link": {
                                    "label": "Learn more",
                                    "uri": "https://www.microsoft.com"
                                }
                            }
                        },
                        {
                            "name": "ppCitizen",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Create Environments for citizen developer scenarios",
                            "defaultValue": "Yes, with Dataverse (recommended)",
                            "multiSelect": true,
                            "toolTip": "If 'Yes' is selected, the setup will create new environments for citizen developer scenarios",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Yes, with Dataverse (recommended)",
                                        "value": "yes"
                                    },
                                    {
                                        "label": "Yes, without Dataverse",
                                        "value": "half"
                                    },
                                    {
                                        "label": "Yes, and let me configure each Environment",
                                        "value": "custom"
                                    },
                                    {
                                        "label": "No",
                                        "value": "no"
                                    }
                                ]
                            },
                            "visible": true
                        },
                        {
                            "name": "callGraph",
                            "type": "Microsoft.Solutions.GraphApiControl",
                            "request": {
                                "method": "GET",
                                "path": "/beta/users?&select=displayName,id",
                                "transforms": {
                                    "list": "value|[*].{label:displayName, value:id}"
                                }
                            }
                        },
                        {
                            "name": "ppCitizenConfiguration",
                            "type": "Microsoft.Common.EditableGrid",
                            "ariaLabel": "Create and Configure Citizen Environment",
                            "label": "Citizen Environment configuration",
                            "visible": "[equals(steps('landingZones').ppCitizen, 'custom')]",
                            "constraints": {
                                "width": "Full",
                                "rows": {
                                    "count": {
                                        "min": 1,
                                        "max": 100
                                    }
                                },
                                "columns": [
                                    {
                                        "id": "ppEnvName",
                                        "header": "Environment Name",
                                        "width": "1fr",
                                        "element": {
                                            "type": "Microsoft.Common.TextBox",
                                            "placeholder": "",
                                            "constraints": {
                                                "required": true,
                                                "validations": [
                                                    {
                                                        "regex": "^[a-z0-9A-Z]{1,30}$",
                                                        "message": "Only alphanumeric characters are allowed, and the value must be 1-30 characters long."
                                                    }
                                                ]
                                            }
                                        }
                                    },
                                    {
                                        "id": "ppRegion",
                                        "header": "Region",
                                        "width": "1fr",
                                        "element": {
                                            "name": "ppRegion",
                                            "type": "Microsoft.Common.DropDown",
                                            "placeholder": "Select a region...",
                                            "constraints": {
                                                "allowedValues": [
                                                    {
                                                        "label": "Europe",
                                                        "value": "europe"
                                                    },
                                                    {
                                                        "label": "United States",
                                                        "value": "unitedstates"
                                                    },
                                                    {
                                                        "label": "United Arab Emirates",
                                                        "value": "unitedarabemirates"
                                                    },
                                                    {
                                                        "label": "Asia",
                                                        "value": "asia"
                                                    },
                                                    {
                                                        "label": "India",
                                                        "value": "india"
                                                    },
                                                    {
                                                        "label": "Japan",
                                                        "value": "japan"
                                                    },
                                                    {
                                                        "label": "France",
                                                        "value": "france"
                                                    },
                                                    {
                                                        "label": "Germany",
                                                        "value": "germany"
                                                    },
                                                    {
                                                        "label": "Australia",
                                                        "value": "australia"
                                                    },
                                                    {
                                                        "label": "Canada",
                                                        "value": "canada"
                                                    },
                                                    {
                                                        "label": "South America",
                                                        "value": "southamerica"
                                                    }
                                                ],
                                                "required": true
                                            }
                                        }
                                    },
                                    {
                                        "id": "ppDataverse",
                                        "header": "Create Dataverse",
                                        "width": "2fr",
                                        "element": {
                                            "type": "Microsoft.Common.DropDown",
                                            "constraints": {
                                                "allowedValues": [
                                                    {
                                                        "label": "Yes (recommended)",
                                                        "value": "yes"
                                                    },
                                                    {
                                                        "label": "No",
                                                        "value": "no"
                                                    }
                                                ],
                                                "required": true
                                            }
                                        }
                                    },
                                    {
                                        "id": "ppRbac",
                                        "header": "Assign RBAC",
                                        "width": "2fr",
										"filter": true,
										"multiLine": true,
                                        "element": {
                                            "type": "Microsoft.Common.DropDown",
                                            "constraints": {
                                                "required": true,
                                                "allowedValues": "[coalesce(steps('landingZones').callGraph.transformed.list, parse('[]'))]"
                                            }
                                        }
                                    }
                                ]
                            }
                        },
                        {
                            "name": "ppCitizenCount",
                            "type": "Microsoft.Common.Slider",
                            "min": 1,
                            "max": 100,
                            "label": "Number of Environments for citizen developers to be created",
                            "subLabel": "Environments",
                            "defaultValue": 1,
                            "showStepMarkers": false,
                            "toolTip": "Select how many Environments you will create for citizen developers.",
                            "constraints": {
                                "required": false
                            },
                            "visible": "[or(equals(steps('landingZones').ppCitizen, 'yes'), equals(steps('landingZones').ppCitizen, 'half'))]"
                        },
                        {
                            "name": "ppCitizenNaming",
                            "type": "Microsoft.Common.TextBox",
                            "label": "Provide naming convention for the citizen developers environments",
                            "placeholder": "",
                            "defaultValue": "",
                            "toolTip": "Use only allowed characters",
                            "constraints": {
                                "required": true,
                                "regex": "^[a-z0-9A-Z]{1,30}$",
                                "validationMessage": "Only alphanumeric characters are allowed, and the value must be 1-30 characters long."
                            },
                            "visible": "[or(equals(steps('landingZones').ppCitizen, 'yes'), equals(steps('landingZones').ppCitizen, 'half'))]"
                        },
                        {
                            "name": "ppCitizenRegion",
                            "type": "Microsoft.Common.DropDown",
                            "label": "Select region for the new Environments for citizen developers",
                            "placeholder": "",
                            "defaultValue": "",
                            "toolTip": "",
                            "visible": "[or(equals(steps('landingZones').ppCitizen, 'yes'), equals(steps('landingZones').ppCitizen, 'half'))]",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Europe",
                                        "value": "europe"
                                    },
                                    {
                                        "label": "United States",
                                        "value": "unitedstates"
                                    },
                                    {
                                        "label": "United Arab Emirates",
                                        "value": "unitedarabemirates"
                                    },
                                    {
                                        "label": "Asia",
                                        "value": "asia"
                                    },
                                    {
                                        "label": "India",
                                        "value": "india"
                                    },
                                    {
                                        "label": "Japan",
                                        "value": "japan"
                                    },
                                    {
                                        "label": "France",
                                        "value": "france"
                                    },
                                    {
                                        "label": "Germany",
                                        "value": "germany"
                                    },
                                    {
                                        "label": "Australia",
                                        "value": "australia"
                                    },
                                    {
                                        "label": "Canada",
                                        "value": "canada"
                                    },
                                    {
                                        "label": "South America",
                                        "value": "southamerica"
                                    }
                                ],
                                "required": true
                            }
                        },
                        {
                            "name": "ppCitizenDlp",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Assign recommended Data-loss prevention policies to the Environments for citizen development",
                            "defaultValue": "Yes (recommended)",
                            "multiSelect": true,
                            "toolTip": "If 'Yes' is selected, the setup will enable this",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Yes (recommended)",
                                        "value": "yes"
                                    },
                                    {
                                        "label": "No",
                                        "value": "no"
                                    }
                                ]
                            },
                            "visible": "[not(equals(steps('landingZones').ppCitizen, 'no'))]"
                        },
                        {
                            "name": "ppCitizenAlm",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Create Development, Test, and Production environments for each landing zone",
                            "defaultValue": "Yes (recommended)",
                            "toolTip": "If 'Yes' is selected, the setup adhere to best practices and create dedicated environments for sustainable application life-cycle management",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Yes (recommended)",
                                        "value": "yes"
                                    },
                                    {
                                        "label": "No",
                                        "value": "no"
                                    }
                                ]
                            },
                            "visible": "[not(equals(steps('landingZones').ppCitizen, 'no'))]"
                        },
                        {
                            "name": "ppCitizenBilling",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Create Billing Policy and Use Azure Subscription for pay-as-you-go for the citizen developer Environments",
                            "defaultValue": "Yes (recommended)",
                            "toolTip": "If 'Yes' is selected, the setup will enable it",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Yes (recommended)",
                                        "value": "yes"
                                    },
                                    {
                                        "label": "No",
                                        "value": "no"
                                    }
                                ]
                            },
                            "visible": "[not(equals(steps('landingZones').ppCitizen, 'no'))]"
                        },
                        {
                            "name": "proSection",
                            "type": "Microsoft.Common.Section",
                            "label": "Landing Zones for professional developers",
                            "elements": [],
                            "visible": true
                        },
                        {
                            "name": "proText",
                            "type": "Microsoft.Common.TextBlock",
                            "visible": true,
                            "options": {
                                "text": "The Landing Zones for professional developrs will be optimized for enterprise application scenarios, and provide them with the required agility and simplicity to rapidly build robust enterprise applications with mature application lifecycle management. You can grant business units or indivuduals access to the Environments post creation.",
                                "link": {
                                    "label": "Learn more",
                                    "uri": "https://www.microsoft.com"
                                }
                            }
                        },
                        {
                            "name": "ppPro",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Create Environments for professional developer scenarios",
                            "defaultValue": "Yes, with Dataverse (recommended)",
                            "multiSelect": true,
                            "toolTip": "If 'Yes' is selected, the setup will create new environments for professional developer scenarios",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Yes, with Dataverse (recommended)",
                                        "value": "yes"
                                    },
                                    {
                                        "label": "Yes, without Dataverse",
                                        "value": "half"
                                    },
                                    {
                                        "label": "Yes, and let me configure each Environment",
                                        "value": "custom"
                                    },
                                    {
                                        "label": "No",
                                        "value": "no"
                                    }
                                ]
                            },
                            "visible": true
                        },
                        {
                            "name": "ppProConfiguration",
                            "type": "Microsoft.Common.EditableGrid",
                            "ariaLabel": "Create and Configure Pro Environment",
                            "label": "Professional Environment configuration",
                            "visible": "[equals(steps('landingZones').ppPro, 'custom')]",
                            "constraints": {
                                "width": "Full",
                                "rows": {
                                    "count": {
                                        "min": 1,
                                        "max": 100
                                    }
                                },
                                "columns": [
                                    {
                                        "id": "ppEnvName",
                                        "header": "Environment Name",
                                        "width": "1fr",
                                        "element": {
                                            "type": "Microsoft.Common.TextBox",
                                            "placeholder": "",
                                            "constraints": {
                                                "required": true,
                                                "validations": [
                                                    {
                                                        "regex": "^[a-z0-9A-Z]{1,30}$",
                                                        "message": "Only alphanumeric characters are allowed, and the value must be 1-30 characters long."
                                                    }
                                                ]
                                            }
                                        }
                                    },
                                    {
                                        "id": "ppRegion",
                                        "header": "Region",
                                        "width": "1fr",
                                        "element": {
                                            "name": "ppRegionDropDown",
                                            "type": "Microsoft.Common.DropDown",
                                            "placeholder": "Select a region...",
                                            "constraints": {
                                                "allowedValues": [
                                                    {
                                                        "label": "Europe",
                                                        "value": "europe"
                                                    },
                                                    {
                                                        "label": "United States",
                                                        "value": "unitedstates"
                                                    },
                                                    {
                                                        "label": "United Arab Emirates",
                                                        "value": "unitedarabemirates"
                                                    },
                                                    {
                                                        "label": "Asia",
                                                        "value": "asia"
                                                    },
                                                    {
                                                        "label": "India",
                                                        "value": "india"
                                                    },
                                                    {
                                                        "label": "Japan",
                                                        "value": "japan"
                                                    },
                                                    {
                                                        "label": "France",
                                                        "value": "france"
                                                    },
                                                    {
                                                        "label": "Germany",
                                                        "value": "germany"
                                                    },
                                                    {
                                                        "label": "Australia",
                                                        "value": "australia"
                                                    },
                                                    {
                                                        "label": "Canada",
                                                        "value": "canada"
                                                    },
                                                    {
                                                        "label": "South America",
                                                        "value": "southamerica"
                                                    }
                                                ],
                                                "required": true
                                            }
                                        }
                                    },
                                    {
                                        "id": "ppDataverse",
                                        "header": "Create Dataverse",
                                        "width": "2fr",
                                        "element": {
                                            "type": "Microsoft.Common.DropDown",
                                            "constraints": {
                                                "allowedValues": [
                                                    {
                                                        "label": "Yes (recommended)",
                                                        "value": "yes"
                                                    },
                                                    {
                                                        "label": "No",
                                                        "value": "no"
                                                    }
                                                ],
                                                "required": true
                                            }
                                        }
                                    },
                                    {
                                        "id": "ppRbac",
                                        "header": "Assign RBAC",
                                        "width": "2fr",
										"filter": true,
										"multiLine": true,
                                        "element": {
                                            "type": "Microsoft.Common.DropDown",
                                            "constraints": {
                                                "required": true,
                                                "allowedValues": "[coalesce(steps('landingZones').callGraph.transformed.list, parse('[]'))]"
                                            }
                                        }
                                    }
                                ]
                            }
                        },
                        {
                            "name": "ppProCount",
                            "type": "Microsoft.Common.Slider",
                            "min": 1,
                            "max": 100,
                            "label": "Number of Environments for professional developers to be created",
                            "subLabel": "Environments",
                            "defaultValue": 1,
                            "showStepMarkers": false,
                            "toolTip": "Select how many Environments you will create for professional developers.",
                            "constraints": {
                                "required": false
                            },
                            "visible": "[or(equals(steps('landingZones').ppPro, 'yes'), equals(steps('landingZones').ppPro, 'half'))]"
                        },
                        {
                            "name": "ppProNaming",
                            "type": "Microsoft.Common.TextBox",
                            "label": "Provide naming convention for the professional developers environments",
                            "placeholder": "",
                            "defaultValue": "",
                            "toolTip": "Use only allowed characters",
                            "constraints": {
                                "required": true,
                                "regex": "^[a-z0-9A-Z]{1,30}$",
                                "validationMessage": "Only alphanumeric characters are allowed, and the value must be 1-30 characters long."
                            },
                            "visible": "[or(equals(steps('landingZones').ppPro, 'yes'), equals(steps('landingZones').ppPro, 'half'))]"
                        },
                        {
                            "name": "ppProRegion",
                            "type": "Microsoft.Common.DropDown",
                            "label": "Select region for the new Environments for professional developers",
                            "placeholder": "",
                            "defaultValue": "",
                            "toolTip": "",
                            "visible": "[or(equals(steps('landingZones').ppPro, 'yes'), equals(steps('landingZones').ppPro, 'half'))]",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Europe",
                                        "value": "europe"
                                    },
                                    {
                                        "label": "United States",
                                        "value": "unitedstates"
                                    },
                                    {
                                        "label": "United Arab Emirates",
                                        "value": "unitedarabemirates"
                                    },
                                    {
                                        "label": "Asia",
                                        "value": "asia"
                                    },
                                    {
                                        "label": "India",
                                        "value": "india"
                                    },
                                    {
                                        "label": "Japan",
                                        "value": "japan"
                                    },
                                    {
                                        "label": "France",
                                        "value": "france"
                                    },
                                    {
                                        "label": "Germany",
                                        "value": "germany"
                                    },
                                    {
                                        "label": "Australia",
                                        "value": "australia"
                                    },
                                    {
                                        "label": "Canada",
                                        "value": "canada"
                                    },
                                    {
                                        "label": "South America",
                                        "value": "southamerica"
                                    }
                                ],
                                "required": true
                            }
                        },
                        {
                            "name": "ppProDlp",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Assign recommended Data-loss prevention policies to the Environments for professional development",
                            "defaultValue": "Yes (recommended)",
                            "multiSelect": true,
                            "toolTip": "If 'Yes' is selected, the setup will enable this",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Yes (recommended)",
                                        "value": "yes"
                                    },
                                    {
                                        "label": "No",
                                        "value": "no"
                                    }
                                ]
                            },
                            "visible": "[not(equals(steps('landingZones').ppPro, 'no'))]"
                        },
                        {
                            "name": "ppProAlm",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Create Development, Test, and Production environments for each landing zone",
                            "defaultValue": "Yes (recommended)",
                            "toolTip": "If 'Yes' is selected, the setup will enable it, and adhere to best practices and create dedicated environments for sustainable application life-cycle management",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Yes (recommended)",
                                        "value": "yes"
                                    },
                                    {
                                        "label": "No",
                                        "value": "no"
                                    }
                                ]
                            },
                            "visible": "[not(equals(steps('landingZones').ppPro, 'no'))]"
                        },
                        {
                            "name": "ppProBilling",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Create Billing Policy and Use Azure Subscription for pay-as-you-go for the professional developer Environments",
                            "defaultValue": "Yes (recommended)",
                            "toolTip": "If 'Yes' is selected, the setup will enable it",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Yes (recommended)",
                                        "value": "yes"
                                    },
                                    {
                                        "label": "No",
                                        "value": "no"
                                    }
                                ]
                            },
                            "visible": "[not(equals(steps('landingZones').ppPro, 'no'))]"
                        },
                        {
                            "name": "industrySection",
                            "type": "Microsoft.Common.Section",
                            "label": "Landing Zones for Industry Clouds",
                            "elements": [],
                            "visible": true
                        },
                        {
                            "name": "industryText",
                            "type": "Microsoft.Common.TextBlock",
                            "visible": true,
                            "options": {
                                "text": "The Landing Zones for Industry Clouds are intended to host your D365 applications and Industry Solutions. Once created, you can add the Industry Clouds using 'Microsoft Cloud Solution Center'",
                                "link": {
                                    "label": "Microsoft Cloud Solution Center",
                                    "uri": "https://solutions.microsoft.com/"
                                }
                            }
                        },
                        {
                            "name": "ppIndustry",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Create Environments for Industry Clouds",
                            "defaultValue": "Yes",
                            "multiSelect": false,
                            "toolTip": "If 'Yes' is selected, the setup will create new environments for Industry scenarios (requires Dataverse)",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Yes",
                                        "value": "yes"
                                    },
                                    {
                                        "label": "No",
                                        "value": "no"
                                    }
                                ]
                            },
                            "visible": true
                        },
                        {
                            "name": "ppSelectIndustry",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Select Microsoft Cloud for Industry",
                            "defaultValue": "None",
                            "multiSelect": false,
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "None",
                                        "value": "none"
                                    },
                                    {
                                        "label": "Healthcare",
                                        "value": "healthcare"
                                    },
                                    {
                                        "label": "Financial Services",
                                        "value": "fsi"
                                    },
                                    {
                                        "label": "Retail",
                                        "value": "retail"
                                    }
                                ]
                            },
                            "visible": "[not(equals(steps('landingZones').ppIndustry, 'no'))]"
                        },
                        {
                            "name": "ppIndustryNaming",
                            "type": "Microsoft.Common.TextBox",
                            "label": "Provide naming convention for the industry environments",
                            "placeholder": "",
                            "defaultValue": "",
                            "toolTip": "Use only allowed characters",
                            "constraints": {
                                "required": true,
                                "regex": "^[a-z0-9A-Z]{1,30}$",
                                "validationMessage": "Only alphanumeric characters are allowed, and the value must be 1-30 characters long."
                            },
                            "visible": "[not(equals(steps('landingZones').ppIndustry, 'no'))]"
                        },
                        {
                            "name": "ppIndustryRegion",
                            "type": "Microsoft.Common.DropDown",
                            "label": "Select region for the new Environments for the industry clouds",
                            "placeholder": "",
                            "defaultValue": "",
                            "toolTip": "",
                            "visible": "[equals(steps('landingZones').ppIndustry, 'yes')]",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Europe",
                                        "value": "europe"
                                    },
                                    {
                                        "label": "United States",
                                        "value": "unitedstates"
                                    },
                                    {
                                        "label": "United Arab Emirates",
                                        "value": "unitedarabemirates"
                                    },
                                    {
                                        "label": "Asia",
                                        "value": "asia"
                                    },
                                    {
                                        "label": "India",
                                        "value": "india"
                                    },
                                    {
                                        "label": "Japan",
                                        "value": "japan"
                                    },
                                    {
                                        "label": "France",
                                        "value": "france"
                                    },
                                    {
                                        "label": "Germany",
                                        "value": "germany"
                                    },
                                    {
                                        "label": "Australia",
                                        "value": "australia"
                                    },
                                    {
                                        "label": "Canada",
                                        "value": "canada"
                                    },
                                    {
                                        "label": "South America",
                                        "value": "southamerica"
                                    }
                                ],
                                "required": true
                            }
                        },
                        {
                            "name": "ppIndustryAlm",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Create Development, Test, and Production environments for each landing zone",
                            "defaultValue": "Yes (recommended)",
                            "toolTip": "If 'Yes' is selected, the setup will enable it",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Yes (recommended)",
                                        "value": "yes"
                                    },
                                    {
                                        "label": "No",
                                        "value": "no"
                                    }
                                ]
                            },
                            "visible": "[equals(steps('landingZones').ppIndustry, 'yes')]"
                        },
                        {
                            "name": "ppIndustryBilling",
                            "type": "Microsoft.Common.OptionsGroup",
                            "label": "Create Billing Policy and Use Azure Subscription for pay-as-you-go for the Industry Environments",
                            "defaultValue": "Yes (recommended)",
                            "toolTip": "If 'Yes' is selected, the setup will enable it",
                            "constraints": {
                                "allowedValues": [
                                    {
                                        "label": "Yes (recommended)",
                                        "value": "yes"
                                    },
                                    {
                                        "label": "No",
                                        "value": "no"
                                    }
                                ]
                            },
                            "visible": "[equals(steps('landingZones').ppIndustry, 'yes')]"
                        }
                    ]
                }
            ]
        },
        "outputs": {
            "parameters": {
                "ppIdentity": "[steps('powerp').ppIdentity.id]",
                "ppTenantDlp": "[steps('gov').ppTenantDlp]",
                "ppTenantIsolationDomains": "[steps('gov').ppTenantIsolationDomains]",
                "ppTenantIsolationSetting": "[steps('gov').ppTenantIsolationSetting]",
                "ppGuestMakerSetting": "[steps('gov').ppGuestMakerSetting]",
                "ppAppSharingSetting": "[steps('gov').ppAppSharingSetting]",
                "ppEnvCreationSetting": "[steps('environments').ppEnvCreationSetting]",
                "ppTrialEnvCreationSetting": "[steps('environments').ppTrialEnvCreationSetting]",
                "ppEnvCapacitySetting": "[steps('environments').ppEnvCapacitySetting]",
                "ppAdminEnvNaming": "[steps('environments').ppAdminEnvNaming]",
                "ppAdminRegion": "[steps('environments').ppAdminRegion]",
                "ppAdminBilling": "[steps('environments').ppAdminBilling]",
                "ppAdminCoeSetting": "[steps('environments').ppAdminCoeSetting]",
                "ppDefaultRenameText": "[steps('landingZones').ppDefaultRenameText]",
                "ppDefaultDlp": "[steps('landingZones').ppDefaultDlp]",
                "ppEnableAzureMonitor": "[steps('mgmt').ppEnableAzureMonitor]",
                "ppEnableAppInsights": "[steps('mgmt').ppEnableAppInsights]",
                "ppEnableAzureSecurity": "[steps('mgmt').ppEnableAzureSecurity]",
                "ppEnableD365Connector": "[steps('mgmt').ppEnableD365Connector]",
                "ppEnableAadLogs": "[steps('mgmt').ppEnableAadLogs]",
                "ppEnableTenantAnalytics": "[steps('mgmt').ppEnableTenantAnalytics]",
                "ppEnableDataLake": "[steps('mgmt').ppEnableDataLake]",
                "ppRetentionInDays": "[string(steps('mgmt').ppRetentionInDays)]",
                "ppCitizen": "[steps('landingZones').ppCitizen]",
                "ppCitizenConfiguration": "[replace(replace(replace(replace(replace(string(steps('landingZones').ppCitizenConfiguration), '{', ''), '}', ''), '\"', ''), '[', ''), ']', '')]",
                "ppCitizenCount": "[steps('landingZones').ppCitizenCount]",
                "ppCitizenNaming": "[steps('landingZones').ppCitizenNaming]",
                "ppCitizenRegion": "[steps('landingZones').ppCitizenRegion]",
                "ppCitizenDlp": "[steps('landingZones').ppCitizenDlp]",
                "ppCitizenAlm": "[steps('landingZones').ppCitizenAlm]",
                "ppCitizenBilling": "[steps('landingZones').ppCitizenBilling]",
                "ppPro": "[steps('landingZones').ppPro]",
                "ppProConfiguration": "[replace(replace(replace(replace(replace(string(steps('landingZones').ppProConfiguration), '{', ''), '}', ''), '\"', ''), '[', ''), ']', '')]",
                "ppProCount": "[steps('landingZones').ppProCount]",
                "ppProNaming": "[steps('landingZones').ppProNaming]",
                "ppProDlp": "[steps('landingZones').ppProDlp]",
                "ppProAlm": "[steps('landingZones').ppProAlm]",
                "ppProRegion": "[steps('landingZones').ppProRegion]",
                "ppProBilling": "[steps('landingZones').ppProBilling]",
                "ppSelectIndustry": "[steps('landingZones').ppSelectIndustry]",
                "ppIndustryNaming": "[steps('landingZones').ppIndustryNaming]",
                "ppIndustryRegion": "[steps('landingZones').ppIndustryRegion]",
                "ppIndustryBilling": "[steps('landingZones').ppIndustryBilling]",
                "ppIndustryAlm": "[steps('landingZones').ppIndustryAlm]"
            },
            "kind": "Subscription",
            "location": "[steps('powerp').locationName]",
            "subscriptionId": "[steps('powerp').subscriptionId]"
        }
    }
}